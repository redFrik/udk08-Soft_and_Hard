
//BLUETOOTH  (serial)

a [quite] simple way to set up a wireless serial connection
always some hassle to begin with, but stable when everything is up and running

RN-42 class2 - silver 10m, the most common and standard one
RN-41 class1 - gold 100m, expensive



good quality but expensive:
bluetooth mate silver https://www.sparkfun.com/products/10393
bluetooth mate gold
tutorial:
https://www.sparkfun.com/tutorials/264
there is also bluesmirf silver/gold from sparkfun but i didn't try them yet


very cheap.  but works well and are smaller:
http://dx.com/p/jy-mcu-arduino-bluetooth-wireless-serial-port-module-104299
tutorials:
https://byron76.blogspot.de/2011/09/one-board-several-firmwares.html
https://apirola.wordpress.com/2012/09/05/setup-jy-mcu-bt-board-v1-2/




show kdevice with leds and sensors



//test max patch

<pre><code>
----------begin_max5_patcher----------
1778.3oc6as0abhCE94I+JrPQ6SIU9BlKUpOrOzGVosRUaWsuDUE4AblPWFy
HfjdS8+9Zv.CLCX7LcJgIYUR.ECX+c974hwmCe+hEVKS9BOyB7ZvMfEK99EK
VT1TQCKp9+EVqYeIHlkUdaVqeHNOJKNJjmZck55Y77r7uFyKtNpps.lH7qxC
kM5T03FVdv8QhU2lxCxUCJl.eE7Jfse4ILlVbB4hdED7wpmJJrbfSV9oqon5
wT7v5HQrbfaOnRfHaUBWUeq5RJsUekE8sNHR1MIOjW2O3s8S9W2TdivplT2U
cq2.rrtR9G3iEW8GWbQwgqLjAySVsRRVCyIDnhSbUBPyw9XDaesLRW4CMjvD
Ix+EIKXuCPVbeRkEA+yRTTCgb9WJEAqMViq8pjNamRkW+AjN65N5tDQtfstD
vVuKQvBRN.AmzpWpUmkCoN8zBJ4pZloszHsgU7QEgH60nX9i7zrnDQKHrvhs
YSqlWz5QJXwOkT1QzqZZJRnZB0zTJ+wn5m2W0nbt4h5K1n7ScKYQEYhwnxSd
sHU473p3jf+kG1x.cgUH+tCqWR1vEaehxYvNG5dmQhMo7LtHmkWIDsGYlzq3
s8Niz8x2wB3C9r8qSrvZUZTXhn.DcdzhlqGta.nRXi5f6x6Pv1zyCmmjDujk
VLkrrim6RqDlHZMKmmGo.DF17bQq2jVpG0pu3BlrOtOKHMINtSWotxi8bkPo
1P.+yQg42W1WaoqNQjZqm019sS66XGqLApYuArbQjpnCUmpO1Pd6X8hns6v9
LS6wTE15JAIqWyUDmkUcykdnprDNRosiWqtdtBtmIVwMjHfC3BaOh.2tC0n1
d.7DYmdbeiHybsMMz5adC.ZHoph2QvuhNBoRNVREOHohNNRcJYxeCfLiHQdl
Rj1uHIRirz8NPCcz+anOpgt2AZmCegZmiMhGM1L2+EIMlCh.QiPjp2iFoVVC
waLibuSuMN93IxeE12FsZPuCawftyz0BZjrdnK787acueKFjEKe6BfiQTAR4
81gNlwhM9z61Ae7QDmL+NM7IxH9z2T5D8BmN8LhNU6sjynqWi38LlNKAqQzE
wP+Z1jA4CnQKRXeotyPMleus6RSbjXnM7nTJKtd+TTVxCoA0CesGJPWQNjmk
GIZ1zpaZ7puy8ceTXX28HRsOdgaRjwjqvmgyoGErQF.au4ErQFB6dlVdJwcw
tMXlVBcdgang31cdAaaSo64kZhmgZ28HeOozsw9.IyKbiLE2vYEt8ME1nYm1
sIv1eVgZhov1dlEg2zPNjSYH9pFqSynUF6Qd3sxgQtlwaY44oQKeHWs1q14.
8mNgc5t1HIKbUbxRVbUxYa5iN87dPZmt5hsrvAlA750rtaJvKpGB4ZsydslT
giTumBwo7D0WWpvaxgzOYpvg8mJ7SpjKxRRMQvsUu3A0Vmf6etH2a97ZPQRE
D73L.7ZpNBnZqjpS.MVGAPOel3GWkuVvcMPk2dtI3q4YYrlbFsUvcjdeIPfC
QNUBAE+3NNEPp1.UjhCbGXx+fIAr1R+wzJf4npFHYjgbYjoQq8mZQWakMQom
hJaZISr5jVZSqKjJfCPH18WWCDbmpTMnspmnNmFE+IYNeHmAr3X.SvhSVARt
6NcUtWscP4IO8LC4bwk.Bq7I.abIzTuBZ7ITQBU6t9f9DvmQ9DLQ+PLt5ARs
C4dHsAL7NWTOrA9t.eGfOEfPxSPfuGf.niqhXSMIrAg9LLrQsnqMrAAOiCaX
2SXC4uTCj8p7t4RzY.PHmQQNFx1XSRZN3S5d6AkBfSEwnyN.6cFYGLDgDDmj
wGmO7ZW+BCwGtOC3i5XqsVusIAWqBgfv1ZYH7yAFBB7.vleZJKMcrSkCFG85
OvyI1wrO6FMuhlhRrKSLZAwz6Fy3LIeeMARlJjky1ou+E9M2nQ45RD3RL3RB
3RavkTvkNlohAqzzn5TwPmSKcYzukmJEIrAqbYqOr4zmxyJVtAxm8.EgXuEG
64vD6PeXSEeHGfP9xGVMNo3zpVTFjTfysWYY.IONgEV3Q.nyP2oc4Rue0L0W
8.dNrR0gVSOOOMooLc0vGJ6daOc7gyShwww+dNCt58xO0oQWrpsAKVkb96uH
imFwhAu62+62d8G9i+7ed6eAgP2q+v6euT1sgvw0cpbe3o889PmFiI7gwTUk
ebWBqDdcqOKE+sa5OqXw8R6IsSsHXRsXse1N6OSm6MkZJj5VSOyCHY.hHjIE
RXuYGKgcmePZ9od6L6PD4rzdC0o1FmEPh5LsyalLwYaOoXZmga.dBM8XBOFO
4O8XBMFlbmTLQMw0D0dRM6LCSz4mcWQNglPdxLLgmeKjqXONmR23FE9cZ0mP
DSC2MgXxnPvvIESlr7xelHvx+4GW7eH8RUvD
-----------end_max5_patcher-----------
</code></pre>



set up bluetooth modules with arduino+breadboard and also laptops
max/sc/pd/arduino





//--sc
//simple read from serial port
(
var port= SerialPort("/dev/tty.usbmodemfa131", 38400);
//SerialPort.listDevices
Routine.run({
	var byte;
	inf.do{
		byte= port.read;
		byte.postln;
	};
});

CmdPeriod.doOnce({port.close});
)




//--arduino code for sending to sc
byte cnt= 0;
void setup() {
  Serial.begin(38400);
}
void loop() {
  Serial.write(cnt);
  cnt++;
  delay(1000);
}







//sc
//simple write to serial port
(
var port= SerialPort("/dev/tty.usbmodemfa131", 38400);
Routine.run({
	var byte= 0;
	inf.do{|i|
		byte= 255.rand;
		//port.putAll(Int8Array[byte%255]);
		port.put(127);
		0.1.wait;
	};
});
CmdPeriod.doOnce({port.close});
)









//sc
//an example sending 8 bytes in a message to kdevice
(
var port= SerialPort("/dev/tty.MATE-SILVER0007-SPP", 38400);

Routine.run({
	var bytes;
	inf.do{|i|
		bytes= {|j| sin(i/100+j).linlin(-1, 1, 0, 255)}.dup(6).asInteger;
		bytes.postln;
		port.putAll([10]++bytes++[11]);
		0.01.wait;
	};
});

CmdPeriod.doOnce({port.close});
)



